<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JavaCall.jl -- Call Java from Julia</title>

    <link rel="stylesheet" href="res/styles.css">
    <link rel="stylesheet" href="res/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <style TYPE="text/css">
      code.has-jax {font: inherit; font-size: 100%; background: inherit; border: inherit;}
    </style>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [['$','$'], ['\\(','\\)']],
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'header'] // removed 'code' entry
          }
      });
      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i = 0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });
    </script>  
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>JavaCall.jl</h1>
        <p>Call Java Programs from Julia </p>

        <ul>
          <li><a href="https://github.com/aviks/JavaCall.jl/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/aviks/JavaCall.jl/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/aviks/JavaCall.jl">View On <strong>GitHub</strong></a></li>
        </ul>
        <div class="menu">
        <ul >
           <li><a href="index.html">Home</a></li>
           <li><a href="types.html">Types</a></li>
           <li><a href="methods.html">Methods</a></li>
           <li><a href="gc.html">GC</a></li>
           <li><a href="faq.html">Troubleshooting and FAQs</a></li>
        </ul>
      </div>
      </header>
      <section>
	<h1 id="toc_4">Call Java programs from Julia</h1>

<p>The JavaCall package allows calling Java programs from within Julia code. It uses the Java Native Interface (<a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/jniTOC.html">JNI</a>) to call into an in-process Java Virtual Machine (JVM). The primary entry point to Java is the <code>jcall</code> function. This is modeled on the Julia <code>ccall</code> function, and takes as input the receiver object (or type for static methods), the method name, the output type, a tuple of the method parameter types, and the parameters themselves. </p>

<p>This package has been tested using Oracle JDK 7 on MacOSX and Ubuntu on 64 bits. It <em>should</em> work on Windows. However, it is unlikely to work on a 32 bit processor without further work. </p>

<h2 id="toc_5">Installation</h2>
<div class="highlight"><pre><code class="julia"><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;JavaCall&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>This package has a dependency on the <code>Memoize</code> package</p>

<h2 id="toc_6">Usage</h2>

<p>Static and instance methods with primitive or object arguments and return values are callable. One dimensional Array arguments and return values are also supported. Primitive, string, object or array arguments are converted as required. </p>
<div class="highlight"><pre><code class="jlcon"><span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">using</span> <span class="n">JavaCall</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">JavaCall</span><span class="o">.</span><span class="n">initjava</span><span class="p">([</span><span class="s">&quot;-Xmx 128M&quot;</span><span class="p">])</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">jlm</span> <span class="o">=</span> <span class="p">@</span><span class="n">jvimport</span> <span class="n">java</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">Math</span>
<span class="go">JavaObject{:java.lang.Math} (constructor with 2 methods))</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">jcall</span><span class="p">(</span><span class="n">jlm</span><span class="p">,</span> <span class="s">&quot;sin&quot;</span><span class="p">,</span> <span class="n">jdouble</span><span class="p">,</span> <span class="p">(</span><span class="n">jdouble</span><span class="p">,),</span> <span class="nb">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">1.0</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">jnu</span> <span class="o">=</span> <span class="p">@</span><span class="n">jvimport</span> <span class="n">java</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">URL</span>
<span class="go">JavaObject{:java.net.URL} (constructor with 2 methods)</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">gurl</span> <span class="o">=</span> <span class="n">jnu</span><span class="p">((</span><span class="n">JString</span><span class="p">,),</span> <span class="s">&quot;http://www.google.com&quot;</span><span class="p">)</span>
<span class="go">JavaObject{:java.net.URL}(Ptr{Void} @0x0000000108ae2aa8)</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">jcall</span><span class="p">(</span><span class="n">gurl</span><span class="p">,</span> <span class="s">&quot;getHost&quot;</span><span class="p">,</span> <span class="n">JString</span><span class="p">,())</span>
<span class="go">&quot;www.google.com&quot;</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">j_u_arrays</span> <span class="o">=</span> <span class="p">@</span><span class="n">jvimport</span> <span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Arrays</span>
<span class="go">JavaObject{:java.util.Arrays} (constructor with 2 methods)</span>

<span class="gp">jul</span><span class="n">ia</span><span class="o">&gt;</span> <span class="n">jcall</span><span class="p">(</span><span class="n">j_u_arrays</span><span class="p">,</span> <span class="s">&quot;binarySearch&quot;</span><span class="p">,</span> <span class="n">jint</span><span class="p">,</span> <span class="p">(</span><span class="n">Array</span><span class="p">{</span><span class="n">jint</span><span class="p">,</span><span class="mi">1</span><span class="p">},</span> <span class="n">jint</span><span class="p">),</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">],</span> <span class="mi">40</span><span class="p">)</span>
<span class="go">3</span>
</code></pre>
</div>

<h2 id="toc_7">Major TODOs and Caveats</h2>

<ul>
<li><p>Multidimensional arrays, either as arguments or return values are not supported. Since Java uses Array-of-Arrays, unlike Julia&#39;s  true multidimensional arrays, supporting them is non-trivial, though certainly feasible.  </p></li>
<li><p>Currently, only a low level interface is available, via <code>jcall</code>. As a result, this package is best suited for writing libraries that wrap around existing java packages. Writing user code direcly using this interface might be a bit tedious at present. A high level interface using reflection will eventually be built. </p></li>
<li><p>Field access is not yet supported. It is unclear if a <code>Javabeans</code> style access (i.e. conflating field and getter/setter) is useful.</p></li>
<li><p>While basic memory management has been implemented, there is likely to be some remaining memory leaks in this system. While this should be stable enough for scripting style tasks, more testing is neede before deplying this to long running tasks </p></li>
</ul>

      </section>
      <footer>
        <p></p>
        <p><small>This project is maintained by <a href="http://www.sengupta.net/musings/">Avik Sengupta</a>. <br /> Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="res/scale.fix.js"></script>
    <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-37085988-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>
  </body>
</html>
